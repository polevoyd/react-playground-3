(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(21)},21:function(e,t,n){"use strict";n.r(t);var a,o=n(1),c=n(2),i=n(4),r=n(3),s=n(5),u=n(6),l="pk.eyJ1Ijoia3V0dXphdmNoYW5pbiIsImEiOiJjam5kYnphbW8wczQ1M3ZucmxxMGpoZzFkIn0.Mc_1RL2WSX97wJ7hU3DENA",h=n(0),p=n.n(h),d=n(11),m=n.n(d),b=(n(7),function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return p.a.createElement("form",{onSubmit:this.props.handleLocationSubmit,className:"location-input"},p.a.createElement("label",null,p.a.createElement("input",{type:"text",name:"location",placeholder:"Enter a city",value:this.props.locationToShow,onChange:this.props.handleLocationChange})),p.a.createElement("button",{type:"submit"},"Find tweets"))}}]),t}(p.a.Component)),f=n(8),v=n.n(f),y=[],g=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;e.coordinates!==this.props.coordinates&&(a.setCenter(e.coordinates),setTimeout(function(){for(var e=0;e<y.length;e++){y[e].remove()}t.createPins(t.props.tweets)},3e3))}},{key:"createPins",value:function(e){y=e.map(function(e,t){var n=document.createElement("div");n.className="marker";var o=new v.a.Popup({offset:20,closeButton:!1,className:"popup"}),c=e.pic?e.pic:"",i='<img class="popup-pic" src="'.concat(c,'"></img><p class="popup-text">').concat(e.text,'</p><h5 class="popup-author">@').concat(e.user,"</h6>");return o.setHTML(i),n.addEventListener("mouseover",function(){return o.setLngLat(e.point).setHTML(i).addTo(a)}),n.addEventListener("mouseout",function(){return o.remove()}),new v.a.Marker(n).setLngLat(e.point).setPopup(o).addTo(a)})}},{key:"generateRandomColor",value:function(){return"rgb(".concat(255*Math.random(),", ").concat(255*Math.random(),", ").concat(255*Math.random(),")")}},{key:"renderMapToScreen",value:function(){v.a.accessToken=l,a=new v.a.Map({container:document.getElementById("mapbox-container"),style:"mapbox://styles/mapbox/dark-v9",center:["-118.2439","34.0544"],zoom:12,hash:!1,minZoom:11,maxZoom:15,interactive:!0})}},{key:"componentDidMount",value:function(){this.renderMapToScreen()}},{key:"render",value:function(){return p.a.createElement("div",null)}}]),t}(p.a.Component),j=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{id:"mapbox-container"},p.a.createElement(g,{coordinates:this.props.coordinates,handleCenterChange:this.props.handleCenterChange,tweets:this.props.tweets}))}}]),t}(p.a.Component),L=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"info-icon",onClick:this.props.handleInfoButtonClick},p.a.createElement("h1",null,"?"))}}]),t}(p.a.Component),C=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(r.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return p.a.createElement("div",{className:"info-tab"},p.a.createElement("h2",null,"City Tweets"),p.a.createElement("p",null,"Simply put a city and explore local tweets!"),p.a.createElement("p",null,"App shows you most recent and popular tweets combined."),p.a.createElement("p",{className:"made-by"},p.a.createElement("a",{href:"http://www.polevoy.in"},"www.polevoy.in")))}}]),t}(p.a.Component);n(18).config();var w=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(r.a)(t).call(this,e))).getCoordinatesFromURL=function(){return window.location.hash.split("/").splice(1,2).map(function(e){return parseFloat(e)})},n.state={location:"Los Angeles",locationLngLat:[-122.3447,47.6151],tweets:[]},n.handleLocationSubmit=n.handleLocationSubmit.bind(Object(u.a)(Object(u.a)(n))),n.handleLocationChange=n.handleLocationChange.bind(Object(u.a)(Object(u.a)(n))),n.handleCenterChange=n.handleCenterChange.bind(Object(u.a)(Object(u.a)(n))),n.searchForTweets=n.searchForTweets.bind(Object(u.a)(Object(u.a)(n))),n}return Object(s.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.requestLocationGeocode(this.state.location),setTimeout(function(){return e.searchForTweets()},1e3)}},{key:"handleCenterChange",value:function(e){this.setState({locationLngLat:[e.lngLat.lng,e.lngLat.lat]})}},{key:"requestLocationGeocode",value:function(){var e=this,t="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.state.location,".json?access_token=").concat(l);fetch(t).then(function(e){return e.json()}).then(function(t){e.setState({location:t.features[0].place_name,locationLngLat:t.features[0].center})})}},{key:"handleLocationSubmit",value:function(e){var t=this;e.preventDefault(),this.requestLocationGeocode(this.state.location),setTimeout(function(){return t.searchForTweets()},1e3)}},{key:"handleLocationChange",value:function(e){this.setState({location:e.target.value})}},{key:"generateCoordinateWithin",value:function(e,t){var n=e[0],a=e[1],o=1.60934*t*1e3/111300,c=Math.random(),i=Math.random(),r=o*Math.sqrt(c),s=2*Math.PI*i,u=r*Math.cos(s);return[r*Math.sin(s)+n,u+a]}},{key:"searchForTweets",value:function(){var e=this,t="https://cityglow.herokuapp.com/tweets?lat=".concat(this.state.locationLngLat[1],"&lng=").concat(this.state.locationLngLat[0]);fetch(t).then(function(e){return e.json()}).then(function(t){var n=t.concat(t).map(function(t){return{point:e.generateCoordinateWithin(e.state.locationLngLat,7),text:t.text,pic:t.picture?t.picture[0].media_url:void 0,user:t.user}});e.setState({tweets:n})}).catch(function(e){return console.error(e)})}},{key:"handleInfoButtonClick",value:function(){"40vh"!==document.querySelector("div.info-tab").style.height?(document.querySelector("div.info-tab").style.height="40vh",document.querySelector("div.info-tab").style.paddingTop="18vh",document.querySelector("div.info-tab").style.borderRadius="0em 0em 2em 2em",document.querySelector("div.info-tab").style.border="3px solid #DC965A",document.querySelector("div.info-tab").style.backgroundColor="#2F2F2F"):(document.querySelector("div.info-tab").style.height="0vh",document.querySelector("div.info-tab").style.paddingTop="0vh",document.querySelector("div.info-tab").style.border="none")}},{key:"render",value:function(){return p.a.createElement("div",null,p.a.createElement(b,{handleLocationSubmit:this.handleLocationSubmit,handleLocationChange:this.handleLocationChange}),p.a.createElement(j,{coordinates:this.state.locationLngLat,handleCenterChange:this.handleCenterChange,tweets:this.state.tweets}),p.a.createElement(L,{handleInfoButtonClick:this.handleInfoButtonClick}),p.a.createElement(C,null))}}]),t}(p.a.Component);m.a.render(p.a.createElement(w,null),document.getElementById("root"))},7:function(e,t,n){}},[[12,2,1]]]);
//# sourceMappingURL=main.72f0377b.chunk.js.map