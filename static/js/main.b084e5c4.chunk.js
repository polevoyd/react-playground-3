(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){e.exports=n(34)},34:function(e,t,n){"use strict";n.r(t);var a,o=n(0),c=n.n(o),i=n(17),r=n.n(i),s=(n(8),n(10)),u=n(11),l={location:"Los Angeles, California, United States",locationLngLat:[-118.2439,34.0544],tweets:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOCATION_SET_CITY_COORDINATES":return{location:t.location,locationLngLat:t.locationLngLat,tweets:e.tweets};case"LOCATION_SET_CITY":return{location:t.city,locationLngLat:e.locationLngLat,tweets:e.tweets};case"SET_TWEETS":return{location:e.location,locationLngLat:e.locationLngLat,tweets:t.tweetsArray};default:return e}},h=n(2),d=n(3),m=n(6),f=n(4),b=n(5),v=n(7),y="pk.eyJ1Ijoia3V0dXphdmNoYW5pbiIsImEiOiJjam5kYnphbW8wczQ1M3ZucmxxMGpoZzFkIn0.Mc_1RL2WSX97wJ7hU3DENA",L=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement("form",{onSubmit:this.props.handleLocationSubmit,className:"location-input"},c.a.createElement("label",null,c.a.createElement("input",{type:"text",name:"location",placeholder:"Enter a city",value:this.props.locationToShow,onChange:this.props.handleLocationChange})),c.a.createElement("button",{type:"submit"},"Find tweets"))}}]),t}(c.a.Component),g=n(9),O=n.n(g),w=[],E=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e){if(e.coordinates!==this.props.coordinates){a.setCenter(e.coordinates);for(var t=0;t<w.length;t++){w[t].remove()}this.createPins(this.props.tweets)}}},{key:"createPins",value:function(e){w=e.map(function(e,t){var n=document.createElement("div");n.className="marker";var o=new O.a.Popup({offset:20,closeButton:!1,className:"popup"}),c=e.pic?e.pic:"",i='<img class="popup-pic" src="'.concat(c,'"></img><p class="popup-text">').concat(e.text,'</p><h5 class="popup-author">@').concat(e.user,"</h6>");return o.setHTML(i),n.addEventListener("mouseover",function(){return o.setLngLat(e.point).setHTML(i).addTo(a)}),n.addEventListener("mouseout",function(){return o.remove()}),new O.a.Marker(n).setLngLat(e.point).setPopup(o).addTo(a)})}},{key:"generateRandomColor",value:function(){return"rgb(".concat(255*Math.random(),", ").concat(255*Math.random(),", ").concat(255*Math.random(),")")}},{key:"renderMapToScreen",value:function(){O.a.accessToken=y,a=new O.a.Map({container:document.getElementById("mapbox-container"),style:"mapbox://styles/mapbox/dark-v9",center:["-118.2439","34.0544"],zoom:12,hash:!1,minZoom:11,maxZoom:15,interactive:!0})}},{key:"componentDidMount",value:function(){var e=this;this.renderMapToScreen(),setTimeout(function(){e.createPins(e.props.tweets)},5e3)}},{key:"render",value:function(){return c.a.createElement("div",null)}}]),t}(c.a.Component),T=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{id:"mapbox-container"},c.a.createElement(E,{coordinates:this.props.coordinates,tweets:this.props.tweets}))}}]),t}(c.a.Component),j=function(e){function t(){return Object(h.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"info-icon",onClick:this.props.handleInfoButtonClick},c.a.createElement("h1",null,"?"))}}]),t}(c.a.Component),C=function(){return c.a.createElement("div",{className:"info-tab"},c.a.createElement("h2",null,"City Tweets"),c.a.createElement("p",null,"Simply put a city and explore most recent and popular local tweets!"),c.a.createElement("p",{className:"made-by"},c.a.createElement("a",{href:"http://www.polevoy.in"},"www.polevoy.in")))},k="LOCATION_SET_CITY_COORDINATES",S="LOCATION_SET_CITY",I="SET_TWEETS";function M(e,t){return{type:k,location:e,locationLngLat:t}}n(31).config();var x=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(m.a)(this,Object(f.a)(t).call(this,e))).getCoordinatesFromURL=function(){return window.location.hash.split("/").splice(1,2).map(function(e){return parseFloat(e)})},n.handleLocationSubmit=n.handleLocationSubmit.bind(Object(v.a)(Object(v.a)(n))),n.handleLocationChange=n.handleLocationChange.bind(Object(v.a)(Object(v.a)(n))),n.searchForTweets=n.searchForTweets.bind(Object(v.a)(Object(v.a)(n))),n}return Object(b.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.dispatch(M("Los Angeles, California, United States",[-118.2439,34.0544])),setTimeout(function(){e.searchForTweets()},3e3)}},{key:"requestLocationGeocode",value:function(){var e=this,t="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(this.props.state.location,".json?access_token=").concat(y);fetch(t).then(function(e){return e.json()}).then(function(t){e.props.dispatch(M(t.features[0].place_name,t.features[0].center))})}},{key:"handleLocationSubmit",value:function(e){var t=this;e.preventDefault(),this.requestLocationGeocode(this.props.state.location),setTimeout(function(){t.searchForTweets()},3e3)}},{key:"handleLocationChange",value:function(e){var t;this.props.dispatch((t=e.target.value,{type:S,city:t}))}},{key:"generateCoordinateWithin",value:function(e,t){var n=e[0],a=e[1],o=1.60934*t*1e3/111300,c=Math.random(),i=Math.random(),r=o*Math.sqrt(c),s=2*Math.PI*i,u=r*Math.cos(s);return[r*Math.sin(s)+n,u+a]}},{key:"searchForTweets",value:function(){var e=this,t="https://cityglow.herokuapp.com/tweets?lat=".concat(this.props.state.locationLngLat[1],"&lng=").concat(this.props.state.locationLngLat[0]);fetch(t).then(function(e){return e.json()}).then(function(t){var n=t.concat(t).map(function(t){return{point:e.generateCoordinateWithin(e.props.state.locationLngLat,7),text:t.text,pic:t.picture?t.picture[0].media_url:void 0,user:t.user}});e.props.dispatch({type:I,tweetsArray:n})}).catch(function(e){return console.error(e)})}},{key:"handleInfoButtonClick",value:function(){"40vh"!==document.querySelector("div.info-tab").style.height?(document.querySelector("div.info-tab").style.height="40vh",document.querySelector("div.info-tab").style.paddingTop="18vh",document.querySelector("div.info-tab").style.borderRadius="0em 0em 2em 2em",document.querySelector("div.info-tab").style.border="3px solid #DC965A",document.querySelector("div.info-tab").style.backgroundColor="#2F2F2F"):(document.querySelector("div.info-tab").style.height="0vh",document.querySelector("div.info-tab").style.paddingTop="0vh",document.querySelector("div.info-tab").style.border="none")}},{key:"render",value:function(){return c.a.createElement("div",null,c.a.createElement(L,{handleLocationSubmit:this.handleLocationSubmit,handleLocationChange:this.handleLocationChange}),c.a.createElement(T,{coordinates:this.props.state.locationLngLat,tweets:this.props.state.tweets}),c.a.createElement(j,{handleInfoButtonClick:this.handleInfoButtonClick}),c.a.createElement(C,null))}}]),t}(c.a.Component),_=Object(u.b)(function(e){return{state:e}})(x),N=Object(s.b)(p);r.a.render(c.a.createElement(u.a,{store:N},c.a.createElement(_,null)),document.getElementById("root"))},8:function(e,t,n){}},[[20,2,1]]]);
//# sourceMappingURL=main.b084e5c4.chunk.js.map